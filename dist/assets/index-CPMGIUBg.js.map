{"version":3,"file":"index-CPMGIUBg.js","sources":["../../src/i18n/config.ts","../../src/storage/localStorage.ts","../../src/types/character.ts","../../src/app.ts","../../src/main.ts"],"sourcesContent":["import i18next from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport en from \"./locales/en.json\";\nimport de from \"./locales/de.json\";\n\nexport const defaultLanguage = \"en\";\nexport const supportedLanguages = [\"en\", \"de\"] as const;\n\nexport type SupportedLanguage = (typeof supportedLanguages)[number];\n\nexport async function initI18n() {\n    await i18next.use(LanguageDetector).init({\n        fallbackLng: defaultLanguage,\n        supportedLngs: supportedLanguages,\n        debug: false,\n        resources: {\n            en: { translation: en },\n            de: { translation: de },\n        },\n        interpolation: {\n            escapeValue: false,\n        },\n        detection: {\n            order: [\"localStorage\", \"navigator\"],\n            caches: [\"localStorage\"],\n        },\n    });\n\n    return i18next;\n}\n\nexport function t(key: string, options?: Record<string, unknown>): string {\n    return i18next.t(key, options);\n}\n\nexport async function changeLanguage(lang: SupportedLanguage): Promise<void> {\n    await i18next.changeLanguage(lang);\n}\n\nexport function getCurrentLanguage(): string {\n    return i18next.language;\n}\n","import type { NumeneraCharacter } from \"@/types/character\";\n\nconst STORAGE_KEY = \"numenera_character\";\n\nexport class LocalStorageAdapter {\n    save(character: NumeneraCharacter): void {\n        try {\n            character.lastModified = Date.now();\n            const serialized = JSON.stringify(character);\n            localStorage.setItem(STORAGE_KEY, serialized);\n        } catch (error) {\n            console.error(\"Failed to save character to localStorage:\", error);\n            throw new Error(\"Failed to save character\");\n        }\n    }\n\n    load(): NumeneraCharacter | null {\n        try {\n            const serialized = localStorage.getItem(STORAGE_KEY);\n            if (!serialized) {\n                return null;\n            }\n            return JSON.parse(serialized) as NumeneraCharacter;\n        } catch (error) {\n            console.error(\"Failed to load character from localStorage:\", error);\n            return null;\n        }\n    }\n\n    delete(): void {\n        try {\n            localStorage.removeItem(STORAGE_KEY);\n        } catch (error) {\n            console.error(\"Failed to delete character from localStorage:\", error);\n            throw new Error(\"Failed to delete character\");\n        }\n    }\n\n    exportToJSON(character: NumeneraCharacter): string {\n        return JSON.stringify(character, null, 2);\n    }\n\n    importFromJSON(json: string): NumeneraCharacter {\n        try {\n            const character = JSON.parse(json) as NumeneraCharacter;\n            // Validate basic structure\n            if (!character.id || !character.name) {\n                throw new Error(\"Invalid character data\");\n            }\n            return character;\n        } catch (error) {\n            console.error(\"Failed to import character from JSON:\", error);\n            throw new Error(\"Invalid JSON format\");\n        }\n    }\n}\n\nexport const storage = new LocalStorageAdapter();\n","export interface StatPool {\n    pool: number;\n    edge: number;\n    current: number;\n}\n\nexport interface NumeneraCharacter {\n    id: string;\n    name: string;\n    tier: number;\n    type: string;\n    descriptor: string;\n    focus: string;\n\n    // Core stats\n    might: StatPool;\n    speed: StatPool;\n    intellect: StatPool;\n\n    // Image support\n    portrait: string | null;\n    additionalImages: string[];\n\n    // Freeform text fields\n    background: string;\n    notes: string;\n    equipment: string;\n    abilities: string;\n    cyphers: string;\n    artifacts: string;\n    oddities: string;\n\n    // Metadata\n    lastModified: number;\n}\n\nexport function createEmptyCharacter(): NumeneraCharacter {\n    return {\n        id: globalThis.crypto.randomUUID(),\n        name: \"\",\n        tier: 1,\n        type: \"\",\n        descriptor: \"\",\n        focus: \"\",\n        might: { pool: 0, edge: 0, current: 0 },\n        speed: { pool: 0, edge: 0, current: 0 },\n        intellect: { pool: 0, edge: 0, current: 0 },\n        portrait: null,\n        additionalImages: [],\n        background: \"\",\n        notes: \"\",\n        equipment: \"\",\n        abilities: \"\",\n        cyphers: \"\",\n        artifacts: \"\",\n        oddities: \"\",\n        lastModified: Date.now(),\n    };\n}\n\nexport function validateCharacter(character: NumeneraCharacter): string[] {\n    const errors: string[] = [];\n\n    if (!character.name || character.name.trim() === \"\") {\n        errors.push(\"Character name is required\");\n    }\n\n    if (character.tier < 1 || character.tier > 6) {\n        errors.push(\"Tier must be between 1 and 6\");\n    }\n\n    return errors;\n}\n","import { t } from \"./i18n/config\";\nimport { storage } from \"./storage/localStorage\";\nimport { createEmptyCharacter } from \"./types/character\";\nimport type { NumeneraCharacter } from \"./types/character\";\n\nexport class App {\n    private character: NumeneraCharacter;\n    private appElement: HTMLElement | null;\n\n    constructor() {\n        this.appElement = document.getElementById(\"app\");\n        this.character = storage.load() || createEmptyCharacter();\n    }\n\n    mount() {\n        if (!this.appElement) {\n            console.error(\"App element not found\");\n            return;\n        }\n\n        this.render();\n        this.attachEventListeners();\n    }\n\n    private render() {\n        if (!this.appElement) return;\n\n        this.appElement.innerHTML = `\n            <div class=\"min-h-screen bg-gray-50\">\n                <header class=\"bg-numenera-primary text-white py-4 px-4 shadow-md\">\n                    <h1 class=\"text-2xl font-bold\">${t(\"app.title\")}</h1>\n                    <p class=\"text-sm opacity-90\">${t(\"app.subtitle\")}</p>\n                </header>\n\n                <main class=\"container mx-auto px-4 py-6 max-w-4xl\">\n                    <div class=\"card\">\n                        <h2 class=\"text-xl font-semibold mb-4\">Character Information</h2>\n                        \n                        <!-- Basic Info -->\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.name\")}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"char-name\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.name}\"\n                                    placeholder=\"${t(\"character.name\")}\"\n                                />\n                            </div>\n\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.tier\")}\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    id=\"char-tier\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.tier}\"\n                                    min=\"1\"\n                                    max=\"6\"\n                                />\n                            </div>\n\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.type\")}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"char-type\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.type}\"\n                                    placeholder=\"${t(\"character.type\")}\"\n                                />\n                            </div>\n\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.descriptor\")}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"char-descriptor\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.descriptor}\"\n                                    placeholder=\"${t(\"character.descriptor\")}\"\n                                />\n                            </div>\n\n                            <div class=\"md:col-span-2\">\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.focus\")}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    id=\"char-focus\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.focus}\"\n                                    placeholder=\"${t(\"character.focus\")}\"\n                                />\n                            </div>\n                        </div>\n\n                        <!-- Stats -->\n                        <h3 class=\"text-lg font-semibold mb-3\">${t(\"character.might\")}</h3>\n                        <div class=\"grid grid-cols-3 gap-4 mb-6\">\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.pool\")}\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    id=\"might-pool\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.might.pool}\"\n                                    min=\"0\"\n                                />\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.edge\")}\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    id=\"might-edge\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.might.edge}\"\n                                    min=\"0\"\n                                />\n                            </div>\n                            <div>\n                                <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n                                    ${t(\"character.current\")}\n                                </label>\n                                <input\n                                    type=\"number\"\n                                    id=\"might-current\"\n                                    class=\"input-field\"\n                                    value=\"${this.character.might.current}\"\n                                    min=\"0\"\n                                />\n                            </div>\n                        </div>\n\n                        <div class=\"mt-4 text-sm text-gray-500\">\n                            Last saved: ${new Date(this.character.lastModified).toLocaleString()}\n                        </div>\n                    </div>\n                </main>\n            </div>\n        `;\n    }\n\n    private attachEventListeners() {\n        // Auto-save on input changes\n        const inputs = this.appElement?.querySelectorAll(\"input\");\n        inputs?.forEach((input) => {\n            input.addEventListener(\"change\", () => this.saveCharacter());\n            input.addEventListener(\"blur\", () => this.saveCharacter());\n        });\n    }\n\n    private saveCharacter() {\n        // Update character from form\n        const nameInput = document.getElementById(\"char-name\") as HTMLInputElement;\n        const tierInput = document.getElementById(\"char-tier\") as HTMLInputElement;\n        const typeInput = document.getElementById(\"char-type\") as HTMLInputElement;\n        const descriptorInput = document.getElementById(\"char-descriptor\") as HTMLInputElement;\n        const focusInput = document.getElementById(\"char-focus\") as HTMLInputElement;\n        const mightPoolInput = document.getElementById(\"might-pool\") as HTMLInputElement;\n        const mightEdgeInput = document.getElementById(\"might-edge\") as HTMLInputElement;\n        const mightCurrentInput = document.getElementById(\"might-current\") as HTMLInputElement;\n\n        if (nameInput) this.character.name = nameInput.value;\n        if (tierInput) this.character.tier = parseInt(tierInput.value) || 1;\n        if (typeInput) this.character.type = typeInput.value;\n        if (descriptorInput) this.character.descriptor = descriptorInput.value;\n        if (focusInput) this.character.focus = focusInput.value;\n\n        if (mightPoolInput) this.character.might.pool = parseInt(mightPoolInput.value) || 0;\n        if (mightEdgeInput) this.character.might.edge = parseInt(mightEdgeInput.value) || 0;\n        if (mightCurrentInput)\n            this.character.might.current = parseInt(mightCurrentInput.value) || 0;\n\n        // Save to localStorage\n        storage.save(this.character);\n    }\n}\n","import \"./styles/main.css\";\nimport { initI18n } from \"./i18n/config\";\nimport { App } from \"./app\";\n\nasync function init() {\n    try {\n        // Initialize i18n\n        await initI18n();\n\n        // Initialize and mount the app\n        const app = new App();\n        app.mount();\n    } catch (error) {\n        console.error(\"Failed to initialize application:\", error);\n    }\n}\n\ninit();\n"],"names":["defaultLanguage","supportedLanguages","initI18n","i18next","LanguageDetector","en","de","t","key","options","STORAGE_KEY","LocalStorageAdapter","character","serialized","error","json","storage","createEmptyCharacter","App","input","nameInput","tierInput","typeInput","descriptorInput","focusInput","mightPoolInput","mightEdgeInput","mightCurrentInput","init"],"mappings":"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"}